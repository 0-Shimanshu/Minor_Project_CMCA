{% extends 'base.html' %}
{% block content %}

<div class="page-container">
  <div class="page-header">
    <h1 class="page-title">Notices</h1>
    <a href="/admin/notices/create" class="btn btn-primary btn-sm">
      + Create Notice
    </a>
  </div>

  <div class="card">

    <!-- NOTICE LIST -->
    <div class="list-container">
      {% if notices %}
        <table class="styled-table">
          <thead>
            <tr>
              <th>Title</th>
              <th>Visibility</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for n in notices %}
              <tr>
                <td>
                  <strong>{{ n.title }}</strong>
                  {% if n.summary %}
                    <div class="muted small">{{ n.summary }}</div>
                  {% endif %}
                </td>

                <td>
                  <span class="badge badge-info">{{ n.visibility }}</span>
                </td>

                <td>
                  <span class="badge
                    {% if n.status == 'published' %}
                      badge-success
                    {% else %}
                      badge-warning
                    {% endif %}
                  ">
                    {{ n.status }}
                  </span>
                </td>

                <td>
                  <div class="action-buttons">
                    <a href="/admin/notices/{{ n.id }}"
                       class="btn btn-sm btn-secondary">
                      View
                    </a>

                    <a href="/admin/notices/{{ n.id }}/edit"
                       class="btn btn-sm btn-secondary">
                      Edit
                    </a>

                    {% if n.status != 'published' %}
                      <form method="post"
                            action="/admin/notices/{{ n.id }}/publish"
                            class="inline-form">
                        <label class="small">
                          <input type="checkbox" name="notify" value="1">
                          Notify
                        </label>
                        <button type="submit"
                                class="btn btn-sm btn-primary">
                          Publish
                        </button>
                      </form>
                    {% endif %}

                    <form method="post"
                          action="/admin/notices/{{ n.id }}/delete"
                          class="inline-form"
                          onsubmit="return confirm('Delete this notice?');">
                      <button type="submit"
                              class="btn btn-sm btn-danger">
                        Delete
                      </button>
                    </form>
                  </div>
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      {% else %}
        <p class="muted">No notices created yet.</p>
      {% endif %}
    </div>

  </div>
</div>

{% endblock %}
