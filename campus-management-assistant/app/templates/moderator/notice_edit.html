{% extends 'base.html' %}
{% block content %}

<div class="page-container">
  <h1 class="page-title">Edit Notice</h1>

  <div class="card form-card">
    <form method="post" enctype="multipart/form-data">

      <label>Title</label>
      <input type="text" name="title" value="{{ notice.title }}" required>

      <label>Summary</label>
      <input type="text" name="summary" value="{{ notice.summary }}">

      <label>Content</label>
      <textarea name="content" rows="6" required>{{ notice.content }}</textarea>

      <label>Category</label>
      <select name="category">
        <option selected>{{ notice.category }}</option>
        <option value="Academic">Academic</option>
        <option value="Examination">Examination</option>
        <option value="Fees">Fees</option>
        <option value="CDC">CDC</option>
        <option value="General">General</option>
      </select>

      <label>Visibility</label>
      <select name="visibility">
        <option value="public" {% if notice.visibility=='public' %}selected{% endif %}>Public</option>
        <option value="student" {% if notice.visibility=='student' %}selected{% endif %}>Student</option>
        <option value="restricted" {% if notice.visibility=='restricted' %}selected{% endif %}>Restricted</option>
      </select>

      <label>Target Department</label>
      <select name="target_department">
        <option value="">All</option>
        <option value="CSE" {% if notice.target_department=='CSE' %}selected{% endif %}>CSE</option>
        <option value="CS" {% if notice.target_department=='CS' %}selected{% endif %}>CS</option>
        <option value="IT" {% if notice.target_department=='IT' %}selected{% endif %}>IT</option>
      </select>

      <label>Target Year</label>
      <select name="target_year">
        <option value="">All</option>
        <option value="1" {% if notice.target_year=='1' %}selected{% endif %}>1st Year</option>
        <option value="2" {% if notice.target_year=='2' %}selected{% endif %}>2nd Year</option>
        <option value="3" {% if notice.target_year=='3' %}selected{% endif %}>3rd Year</option>
        <option value="4" {% if notice.target_year=='4' %}selected{% endif %}>4th Year</option>
      </select>

      <label>Add Attachment</label>
      <input type="file" name="file">

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">Save Changes</button>
        <a href="/moderator/notices" class="btn btn-secondary">Cancel</a>
      </div>

    </form>
  </div>

  {% if notice.files %}
  <div class="card">
    <h3>Existing Attachments</h3>
    <ul class="clean-list">
      {% for f in notice.files %}
        <li>{{ f.file_name }}</li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

</div>

{% endblock %}