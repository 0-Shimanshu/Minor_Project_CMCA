<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Admin Notices</title>
    <link rel="stylesheet" href="/css/admin/admin_notices.css">
</head>

<body>

    <div class="background">
        <span class="blob blob1"></span>
        <span class="blob blob2"></span>
    </div>

    <div class="dashboard">

        <!-- Sidebar -->
        <aside class="sidebar">
            <h2>Admin</h2>
            <nav>
                <a href="admin_dashboard.html">Dashboard</a>
                <a href="admin_users.html">Users</a>
                <a class="active" href="admin_notices.html">Notices</a>
                <a href="admin_faq.html">FAQs</a>
                <a href="admin_logs.html">Logs</a>
                <a href="admin_scraper.html">Scraper</a>
                <a class="logout" href="login.html">Logout</a>
            </nav>
        </aside>

        <!-- Main -->
        <main class="main">

            <header class="header">
                <div>
                    <h1>Notice Management</h1>
                    <p>Create and manage notices</p>
                </div>
                <button class="btn-primary" onclick="openCreateModal()">
                    + Create Notice
                </button>
            </header>

            <!-- Notice List -->
            <section class="card notice-list">

                <div class="notice-row header-row">
                    <span>Title</span>
                    <span>Category</span>
                    <span>Status</span>
                    <span>Visibility</span>
                    <span>Actions</span>
                </div>

            </section>

        </main>
    </div>

    <!-- CREATE NOTICE MODAL -->
    <div class="modal" id="createModal">
        <div class="modal-box">

            <h2>Create Notice</h2>

            <label>Title</label>
            <input type="text" id="c_title" placeholder="Notice title">

            <label>Summary</label>
            <input type="text" id="c_summary" placeholder="Brief summary">

            <label>Content</label>
            <textarea id="c_content" rows="4" placeholder="Full content"></textarea>

            <label>Category</label>
            <select id="c_category">
                <option value="">Select Category</option>
                <option value="Academic">Academic</option>
                <option value="Event">Event</option>
                <option value="Placement">Placement</option>
                <option value="Administration">Administration</option>
            </select>

            <label>Visibility</label>
            <select id="c_visibility">
                <option value="public">Public</option>
                <option value="student">Student Only</option>
                <option value="restricted">Restricted</option>
            </select>

            <label>Department (Optional)</label>
            <select id="c_target_department">
                <option value="">All Departments</option>
                <option value="CS">CS</option>
                <option value="IT">IT</option>
                <option value="ECE">ECE</option>
            </select>

            <label>Year (Optional)</label>
            <select id="c_target_year">
                <option value="">All Years</option>
                <option value="1">1st Year</option>
                <option value="2">2nd Year</option>
                <option value="3">3rd Year</option>
                <option value="4">4th Year</option>
            </select>

            <label>Attachment (Optional)</label>
            <input type="file" id="c_file">

            <label>Publish Now</label>
            <div class="notify-toggle">
                <input type="checkbox" id="c_publish_now">
                <span>Publish immediately</span>
            </div>

            <label>Notify Users by Email</label>
            <div class="notify-toggle">
                <input type="checkbox" id="c_notify">
                <span>Send email notifications</span>
            </div>

            <div class="modal-actions">
                <button class="btn-secondary" onclick="closeModal('createModal')">Cancel</button>
                <button class="btn-primary" onclick="submitCreate()">Create</button>
            </div>

        </div>
    </div>

    <!-- EDIT NOTICE MODAL -->
    <div class="modal" id="editModal">
        <div class="modal-box">

            <h2>Edit Notice</h2>

            <input type="hidden" id="e_id">

            <label>Title</label>
            <input type="text" id="e_title" placeholder="Notice title">

            <label>Summary</label>
            <input type="text" id="e_summary" placeholder="Brief summary">

            <label>Content</label>
            <textarea id="e_content" rows="4" placeholder="Full content"></textarea>

            <label>Visibility</label>
            <select id="e_visibility">
                <option value="public">Public</option>
                <option value="student">Student Only</option>
                <option value="restricted">Restricted</option>
            </select>

            <label>Department (Optional)</label>
            <select id="e_target_department">
                <option value="">All Departments</option>
                <option value="CS">CS</option>
                <option value="IT">IT</option>
                <option value="ECE">ECE</option>
            </select>

            <label>Year (Optional)</label>
            <select id="e_target_year">
                <option value="">All Years</option>
                <option value="1">1st Year</option>
                <option value="2">2nd Year</option>
                <option value="3">3rd Year</option>
                <option value="4">4th Year</option>
            </select>

            <label>Existing Attachments</label>
            <div id="e_attachments"
                style="background:#0f1115;padding:10px;border:1px solid #1f2933;border-radius:4px;max-height:150px;overflow-y:auto;margin-bottom:14px;">
            </div>

            <label>Add New Attachment</label>
            <input type="file" id="e_file">

            <div class="modal-actions">
                <button class="btn-delete" onclick="deleteNoticeFromEdit()">Delete Notice</button>
                <button class="btn-secondary" onclick="closeModal('editModal')">Cancel</button>
                <button class="btn-primary" onclick="submitEdit()">Update</button>
            </div>

        </div>
    </div>

    <footer class="footer">
        Campus Management Assistant Â· Admin Panel
    </footer>

    <script src="/js/api.js"></script>
    <script src="/js/admin/notices.js"></script>

    <script>
        function openCreateModal() {
            const modal = document.getElementById('createModal');
            if (modal) modal.classList.add('show');
        }
        function closeModal(id) {
            const modal = document.getElementById(id);
            if (modal) modal.classList.remove('show');
        }
        window.openCreateModal = openCreateModal;
        window.closeModal = closeModal;
    </script>

</body>

</html>